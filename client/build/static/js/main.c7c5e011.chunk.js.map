{"version":3,"sources":["components/CurrentUserContext.js","components/SignUp.js","components/HomePage.js","components/LogIn.js","components/SecretPage.js","components/AddPost.js","App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","createContext","CurrentUserProvider","props","useState","currentUser","setCurrentUser","Provider","value","children","SignUp","error","setError","useContext","useEffect","a","fetch","response","json","data","console","log","success","getCurrentUser","history","useHistory","usernameInput","setUsernameInput","passwordInput","setPasswordInput","submitSignUp","e","preventDefault","user","username","password","options","method","headers","body","JSON","stringify","push","className","href","onSubmit","type","placeholder","onChange","target","required","variant","role","HomePage","LogIn","submitLogIn","SecretPage","AddPost","csrfToken","setCsrfToken","token","Cookies","get","addPost","text","_csrf","onClick","App","path","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c7c5e011.chunk.js","sourcesContent":["import React, {useState, createContext} from 'react'\r\n\r\n\r\nexport const CurrentUserContext = createContext()\r\n\r\n\r\n\r\nexport function CurrentUserProvider( props ){\r\n\r\n    const [currentUser, setCurrentUser] = useState(false)\r\n\r\n    \r\n\r\n    return (\r\n\r\n        <div>\r\n            <CurrentUserContext.Provider value={[currentUser, setCurrentUser]}>\r\n                {props.children}\r\n            </CurrentUserContext.Provider>\r\n        </div>\r\n\r\n    )\r\n}","import React, {useState, useContext, useEffect} from 'react'\r\nimport {Container} from 'react-bootstrap'\r\nimport {Nav} from 'react-bootstrap'\r\nimport {Form, Button} from 'react-bootstrap'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useHistory\r\n  } from \"react-router-dom\";\r\nimport {CurrentUserContext} from './CurrentUserContext'\r\n\r\n\r\n\r\nfunction SignUp(){\r\n\r\n    const [error, setError] = useState('')\r\n\r\n    const [currentUser, setCurrentUser] = useContext(CurrentUserContext)\r\n    useEffect( () => {\r\n        const getCurrentUser = async () => {\r\n            const response = await fetch ('/user')\r\n            const data = await response.json()\r\n            console.log(data)\r\n\r\n            if(data.success){\r\n                setCurrentUser(data.currentUser)\r\n            } else {\r\n                setCurrentUser(' ')\r\n            }\r\n        }\r\n\r\n        getCurrentUser()\r\n    }, [])\r\n\r\n    let history = useHistory();\r\n    const [usernameInput, setUsernameInput] = useState('')\r\n    const [passwordInput, setPasswordInput] = useState('')\r\n\r\n\r\n    const handleUsername = (e) => {\r\n        setUsernameInput(e.target.value)\r\n    }\r\n\r\n    const handlePassword = (e) => {\r\n        setPasswordInput(e.target.value)\r\n    }\r\n\r\n\r\n\r\n    const submitSignUp = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const user = {username: usernameInput, password: passwordInput}\r\n        \r\n        const options = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(user)\r\n        }\r\n\r\n        const response = await fetch('/signup', options)\r\n        const data = await response.json()\r\n        console.log(data)\r\n        \r\n        if(data.success){\r\n            history.push(\"/\");\r\n        } else {\r\n            setError(data.error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n        <>\r\n        {currentUser ? (\r\n\r\n            <div className=\"container-sm bg-dark\">\r\n\r\n\r\n\r\n                    <nav className='d-flex p-1 align-items-center'>\r\n                                \r\n                                <a href='/' className='p-3'>\r\n                                    Home\r\n                                </a>\r\n                                <a href='/secretpage' className='p-3'>\r\n                                    SecretPage\r\n                                </a>\r\n\r\n\r\n                                {currentUser === ' ' ? (\r\n                                    <>\r\n                                        <a href='/login' className='p-3'>\r\n                                            Log In\r\n                                        </a>\r\n                                        <a href='/signup' className='p-3'>\r\n                                            Sign Up\r\n                                        </a>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <a className='p-3' href='/add'>Hello, {currentUser}</a>\r\n                                        <a href='/logout' className='p-3'>\r\n                                            Log Out\r\n                                        </a>\r\n                                    </>\r\n                                )}\r\n                     \r\n                    </nav>\r\n                \r\n            \r\n\r\n\r\n\r\n                <div className='mt-5 text-light'>\r\n                    <h2>SIGN UP</h2>\r\n                </div>\r\n\r\n\r\n\r\n                    <form className='mt-4' onSubmit={submitSignUp}>\r\n                        <div className='d-flex flex-column'>\r\n                            <label className='text-light'>Email address</label>\r\n                            <input type=\"text\" placeholder=\"Enter username\" className='p-2 rounded border-0 form-control' onChange={handleUsername} required/>\r\n                        </div>\r\n\r\n                        <div className='mt-3 d-flex flex-column mb-4'>\r\n                            <label className='text-light'>Password</label>\r\n                            <input type=\"password\" placeholder=\"Password\" className='p-2 rounded border-0 form-control' onChange={handlePassword} required/>\r\n                        </div>\r\n\r\n                        <div className='mt-3 d-flex flex-column mb-4'>\r\n                            <small className=\"text-danger mt-1\">\r\n                                {error}\r\n                            </small>\r\n                        </div>\r\n\r\n                        <button variant=\"primary\" type=\"submit\" className='bg-primary border-0 p-2 px-3 rounded'>\r\n                            Submit\r\n                        </button>\r\n                    </form>\r\n            \r\n\r\n\r\n            \r\n\r\n\r\n\r\n                    \r\n\r\n            </div>\r\n\r\n        ) : (\r\n\r\n            <div className='d-flex text-light justify-content-center align-items-center vh-100'>\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\"></span>\r\n                </div> \r\n            </div>\r\n\r\n        )}\r\n\r\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                \r\n    </>                        \r\n\r\n\r\n\r\n       \r\n\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default SignUp","import React, {useContext, useEffect, useState} from 'react'\r\nimport {Container} from 'react-bootstrap'\r\nimport {Nav} from 'react-bootstrap'\r\nimport {Form, Button, Jumbotron} from 'react-bootstrap'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n  } from \"react-router-dom\";\r\nimport {CurrentUserContext} from './CurrentUserContext'\r\n\r\n\r\n\r\n\r\nfunction HomePage(){\r\n    const [currentUser, setCurrentUser] = useContext(CurrentUserContext)\r\n\r\n    useEffect( () => {\r\n        const getCurrentUser = async () => {\r\n            const response = await fetch ('/user')\r\n            const data = await response.json()\r\n            console.log(data)\r\n\r\n            if(data.success){\r\n                setCurrentUser(data.currentUser)\r\n            } else {\r\n                setCurrentUser(' ')\r\n            }\r\n        }\r\n\r\n        getCurrentUser()\r\n    }, [])\r\n  \r\n\r\n\r\n\r\n    return (\r\n\r\n        <>\r\n            {currentUser ? (\r\n\r\n                    <div className=\"container-sm bg-dark\">\r\n\r\n                        <nav className='d-flex p-1 align-items-center'>\r\n                                \r\n                                    <a href='/' className='p-3'>\r\n                                        Home\r\n                                    </a>\r\n                                    <a href='/secretpage' className='p-3'>\r\n                                        SecretPage\r\n                                    </a>\r\n\r\n\r\n                                    {currentUser === ' ' ? (\r\n                                        <>\r\n                                            <a href='/login' className='p-3'>\r\n                                                Log In\r\n                                            </a>\r\n                                            <a href='/signup' className='p-3'>\r\n                                                Sign Up\r\n                                            </a>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <a className='p-3' href='/add'>Hello, {currentUser}</a>\r\n                                            <a href='/logout' className='p-3'>\r\n                                                Log Out\r\n                                            </a>\r\n                                        </>\r\n                                    )}\r\n                         \r\n                        </nav>\r\n                            \r\n\r\n\r\n                        <div className='p-5 mt-5 align-items-center text-primary bg-light rounded'>\r\n                            <h1>Hello, world!</h1>\r\n                            <p>\r\n                                This is a simple hero unit, a simple jumbotron-style component for calling\r\n                                extra attention to featured content or information.\r\n                            </p>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n            ) : (\r\n                <div className='d-flex text-light justify-content-center align-items-center vh-100'>\r\n                    <div className=\"spinner-border\" role=\"status\">\r\n                        <span className=\"visually-hidden\"></span>\r\n                    </div> \r\n                </div>\r\n            )}\r\n        </> \r\n\r\n        \r\n\r\n            \r\n\r\n        \r\n    )\r\n}\r\n\r\n\r\n\r\nexport default HomePage","import React, {useContext, useState, useEffect} from 'react'\r\nimport {Container} from 'react-bootstrap'\r\nimport {Nav} from 'react-bootstrap'\r\nimport {Form, Button} from 'react-bootstrap'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useHistory\r\n  } from \"react-router-dom\";\r\nimport {CurrentUserContext} from './CurrentUserContext'\r\n\r\n\r\n\r\nfunction LogIn(){\r\n\r\n    const [currentUser, setCurrentUser] = useContext(CurrentUserContext)\r\n    useEffect( () => {\r\n        const getCurrentUser = async () => {\r\n            const response = await fetch ('/user')\r\n            const data = await response.json()\r\n            console.log(data)\r\n\r\n            if(data.success){\r\n                setCurrentUser(data.currentUser)\r\n            } else {\r\n                setCurrentUser(' ')\r\n            }\r\n        }\r\n\r\n        getCurrentUser()\r\n    }, [])\r\n\r\n    let history = useHistory();\r\n    const [usernameInput, setUsernameInput] = useState('')\r\n    const [passwordInput, setPasswordInput] = useState('')\r\n\r\n    const [error, setError] = useState('')\r\n\r\n\r\n    const handleUsername = (e) => {\r\n        setUsernameInput(e.target.value)\r\n    }\r\n\r\n    const handlePassword = (e) => {\r\n        setPasswordInput(e.target.value)\r\n    }\r\n\r\n\r\n\r\n    const submitLogIn = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const user = {username: usernameInput, password: passwordInput}\r\n        \r\n        const options = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(user)\r\n        }\r\n\r\n        const response = await fetch('/login', options)\r\n        const data = await response.json()\r\n        console.log(data)\r\n        \r\n        if(data.success){\r\n            history.push(\"/\");\r\n        } else {\r\n            setError(data.error)\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <>\r\n        {currentUser ? (\r\n            <div className=\"container-sm bg-dark\">\r\n\r\n                    <nav className='d-flex p-1 align-items-center'>\r\n                                \r\n                                <a href='/' className='p-3'>\r\n                                    Home\r\n                                </a>\r\n                                <a href='/secretpage' className='p-3'>\r\n                                    SecretPage\r\n                                </a>\r\n\r\n\r\n                                {currentUser === ' ' ? (\r\n                                    <>\r\n                                        <a href='/login' className='p-3'>\r\n                                            Log In\r\n                                        </a>\r\n                                        <a href='/signup' className='p-3'>\r\n                                            Sign Up\r\n                                        </a>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <a className='p-3' href='/add'>Hello, {currentUser}</a>\r\n                                        <a href='/logout' className='p-3'>\r\n                                            Log Out\r\n                                        </a>\r\n                                    </>\r\n                                )}\r\n                     \r\n                    </nav>\r\n\r\n\r\n\r\n                    <div className='mt-5 text-light'>\r\n                        <h2>LOG IN</h2>\r\n                    </div>\r\n\r\n            \r\n                    <form className='mt-4' onSubmit={submitLogIn}>\r\n                        <div className='d-flex flex-column'>\r\n                            <label className='text-light'>Email address</label>\r\n                            <input type=\"text\" placeholder=\"Enter username\" className='p-2 rounded border-0 form-control' onChange={handleUsername}/>\r\n                            \r\n                        </div>\r\n\r\n                        <div className='mt-3 d-flex flex-column mb-4'>\r\n                            <label className='text-light'>Password</label>\r\n                            <input type=\"password\" placeholder=\"Password\" className='p-2 rounded border-0 form-control' onChange={handlePassword}/>\r\n                        </div>\r\n                        \r\n                        <div className='mt-3 d-flex flex-column mb-4'>\r\n                            <small className=\"text-danger mt-1\">\r\n                                {error}\r\n                            </small>\r\n                        </div>\r\n                            \r\n\r\n                        <button variant=\"primary\" type=\"submit\" className='bg-primary border-0 p-2 px-3 rounded'>\r\n                            Submit\r\n                        </button>\r\n                    </form>\r\n               \r\n            </div>\r\n\r\n        ) : (\r\n\r\n            <div className='d-flex text-light justify-content-center align-items-center vh-100'>\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\"></span>\r\n                </div> \r\n            </div>\r\n        )}\r\n            \r\n\r\n\r\n\r\n\r\n\r\n\r\n    </>\r\n\r\n                \r\n\r\n\r\n\r\n\r\n       \r\n\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default LogIn","import React, {useContext, useEffect} from 'react'\r\nimport {Container} from 'react-bootstrap'\r\nimport {Nav} from 'react-bootstrap'\r\nimport {Form, Button, Jumbotron} from 'react-bootstrap'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n  } from \"react-router-dom\";\r\nimport {CurrentUserContext} from './CurrentUserContext'\r\n\r\n\r\n\r\n\r\nfunction SecretPage(){\r\n\r\n    const [currentUser, setCurrentUser] = useContext(CurrentUserContext)\r\n\r\n    useEffect( () => {\r\n        const getCurrentUser = async () => {\r\n            const response = await fetch ('/user')\r\n            const data = await response.json()\r\n            console.log(data)\r\n\r\n            if(data.success){\r\n                setCurrentUser(data.currentUser)\r\n            } else {\r\n                setCurrentUser(' ')\r\n            }\r\n        }\r\n\r\n        getCurrentUser()\r\n    }, [])\r\n\r\n\r\n    \r\n\r\n    return (\r\n\r\n        <>\r\n        {currentUser ? (\r\n\r\n                <div className=\"container-sm bg-dark\">\r\n\r\n\r\n\r\n                    <nav className='d-flex p-1 align-items-center'>\r\n                                \r\n                                <a href='/' className='p-3'>\r\n                                    Home\r\n                                </a>\r\n                                <a href='/secretpage' className='p-3'>\r\n                                    SecretPage\r\n                                </a>\r\n\r\n\r\n                                {currentUser === ' ' ? (\r\n                                    <>\r\n                                        <a href='/login' className='p-3'>\r\n                                            Log In\r\n                                        </a>\r\n                                        <a href='/signup' className='p-3'>\r\n                                            Sign Up\r\n                                        </a>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <a className='p-3' href='/add'>Hello, {currentUser}</a>\r\n                                        <a href='/logout' className='p-3'>\r\n                                            Log Out\r\n                                        </a>\r\n                                    </>\r\n                                )}\r\n                     \r\n                    </nav>\r\n\r\n\r\n\r\n\r\n\r\n                    \r\n                <div className='p-5 mt-5 align-items-center text-primary bg-light rounded'>\r\n                    <h1>Secret Page</h1>\r\n                    <p>\r\n                        Only authenticated Users can view this content.\r\n                    </p>\r\n                </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                </div>\r\n\r\n        ) : (\r\n\r\n            <div className='d-flex text-light justify-content-center align-items-center vh-100'>\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\"></span>\r\n                </div> \r\n            </div>\r\n\r\n        )}\r\n        \r\n\r\n            \r\n    </>\r\n        \r\n    )\r\n}\r\n\r\n\r\n\r\nexport default SecretPage","import React, {useContext, useEffect, useState} from 'react'\r\nimport {CurrentUserContext} from './CurrentUserContext'\r\nimport Cookies from 'js-cookie'\r\n\r\n\r\n\r\nfunction AddPost () {\r\n\r\n    const [currentUser, setCurrentUser] = useContext(CurrentUserContext)\r\n    const [csrfToken, setCsrfToken] = useState('')\r\n   \r\n\r\n    useEffect( () => {\r\n        const getCurrentUser = async () => {\r\n            const response = await fetch ('/user')\r\n            const data = await response.json()\r\n            console.log(data)\r\n\r\n            if(data.success){\r\n                setCurrentUser(data.currentUser)\r\n            } else {\r\n                setCurrentUser(' ')\r\n            }\r\n        }\r\n        getCurrentUser()\r\n    }, [])\r\n\r\n\r\n    useEffect( () => {\r\n        const token = Cookies.get('XSRF-TOKEN')\r\n        setCsrfToken(token)\r\n    }, [])\r\n\r\n\r\n\r\n\r\n    const addPost = async () => {\r\n\r\n        const response = await fetch ('/add', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({text: 'prova testo del post aggiunto', _csrf: csrfToken})\r\n        })\r\n\r\n        const data = await response.json()\r\n        console.log(data)\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n\r\n        <>\r\n            {currentUser ? (\r\n\r\n                    <div className=\"container-sm bg-dark\">\r\n\r\n                        <nav className='d-flex p-1 align-items-center'>\r\n                                \r\n                                    <a href='/' className='p-3'>\r\n                                        Home\r\n                                    </a>\r\n                                    <a href='/secretpage' className='p-3'>\r\n                                        SecretPage\r\n                                    </a>\r\n\r\n\r\n                                    {currentUser === ' ' ? (\r\n                                        <>\r\n                                            <a href='/login' className='p-3'>\r\n                                                Log In\r\n                                            </a>\r\n                                            <a href='/signup' className='p-3'>\r\n                                                Sign Up\r\n                                            </a>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <a className='p-3' href='/add'>Hello, {currentUser}</a>\r\n                                            <a href='/logout' className='p-3'>\r\n                                                Log Out\r\n                                            </a>\r\n                                        </>\r\n                                    )}\r\n                         \r\n                        </nav>\r\n                            \r\n\r\n\r\n                        <div className='p-5 mt-5 align-items-center text-primary bg-light rounded'>\r\n                            <h1>Press button to add a post</h1>\r\n                            <button className='mt-3 bg-primary rounded p-2 border-0 text-light' onClick={addPost}>ADD POST</button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n            ) : (\r\n                <div className='d-flex text-light justify-content-center align-items-center vh-100'>\r\n                    <div className=\"spinner-border\" role=\"status\">\r\n                        <span className=\"visually-hidden\"></span>\r\n                    </div> \r\n                </div>\r\n            )}\r\n        </> \r\n\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default AddPost","import 'bootstrap/dist/css/bootstrap.min.css';\nimport SignUp from './components/SignUp'\nimport HomePage from './components/HomePage'\nimport LogIn from './components/LogIn'\nimport SecretPage from './components/SecretPage'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport {CurrentUserProvider} from './components/CurrentUserContext'\nimport { useContext } from 'react';\nimport AddPost from './components/AddPost';\n\n\n\n\nfunction App() {\n\n  \n  return (\n    <div className='bg-dark vh-100'>\n      \n      <Router>\n      <CurrentUserProvider>\n        \n\n        <Switch>\n\n\n            <Route path='/' exact component={HomePage}/>\n\n            <Route path='/signup' exact component={SignUp} />\n\n            <Route path='/login' component = {LogIn} />\n\n            <Route path='/secretpage' component={SecretPage} />\n\n            <Route path='/add' component={AddPost} />\n\n\n        </Switch>\n        \n      \n      </CurrentUserProvider>\n      </Router>\n      \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}